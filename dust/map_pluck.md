# mapとpluckの違いについて

## map pluckとは

どちらも任意のカラムのデータを配列として取得するためのメソッド

`map`...Rubyのメソッドであり、要素の数だけブロックを実行し、戻り値を集めた配列を返す。

`pluck`...Railsのメソッドであり、指定したカラムの配列を返す。毎回SQLが発行される

DBからデータを直接取得する場合は、`pluck`

インスタンスから取得する場合は、`map`を使ったほうが処理速度が上がる傾向にあるとのこと

<br>

## map

```
num = [1,2,3,4,5]
num.map { |i| i*2 }
#=> [2,4,6,8,10]
```

<br>

## pluck

`model.pluck(column)`とすることで、`column`内のデータを配列として取得できる

<br>

## 使い分け

`pluck`は毎回SQLが発行されてしまう。すでにインスタンス化されたオブジェクトから値を取得する際もSQLが発行されてしまう

一方`map`は、メモリ内で処理を行うためやはり以下のような結論になる

## 結論

`plick`...DBから値を取得する時

`map`...インスタンスから値を取得する時、繰り返し処理で値を取得する時

[difference pluck of map](https://www.ryotaku.com/entry/2019/04/13/%E3%80%8Cpluck%E3%80%8D%E3%81%A8%E3%80%8Cmap%E3%80%8D%E3%81%AE%E9%81%95%E3%81%84%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6)

[pluckとmap の違いを調査する](https://qiita.com/TT-nasu/items/e6971efd1383d7f500dd)
