## rubybook chapter 1 ~ 3

- rubyのプログラムを動かす第一歩

  1. <任意>.rb ファイルを作成
  2. 作成したファイルがあるディレクトリまで進む
  3. `ruby <任意>.rb` をターミナルで実行

- 累乗と剰余の計算
  - `puts 2 ** 8`
    - `256`
      - 2 の 8　累乗
  - `puts 7 % 3`
    - `1`
      - 7を3で割った余り　剰余

<br>

- 1や2は、`整数オブジェクト`・`整数`と呼ぶ
- 5.2や4.0は、`小数オブジェクト`と呼ぶ
- "<文字列>"は、`文字列オブジェクト`と呼ぶ

<br>

- 文字列の足し算
  - `puts "hello" + " " + "world!"`
    - `hello world!`

<br>

- 文字列と数値は足すことができない
  - `puts 3 + "3"`はエラーになる

<br>

- `.to_s`
  - オブジェクトをstring(文字列)に変換するメソッド
- `to_i`
  - オブジェクトをInteger(整数)に変換するメソッド

<br>

- オブジェクトとは、Rubyの世界での「もの」のこと。
  - 整数オブジェクト
  - 小数オブジェクト
  - 文字列オブジェクト　などなど

- クラスとは、オブジェクトの種類のこと
  - IntegerオブジェクトのIntegerがクラス
  - FloatオブジェクトのFloatがクラス
  - StringオブジェクトのStringがクラス

<br>

- 変数とは、オブジェクトにつける名札のようなもの
- `=`の左側が変数
- `=`の右側がオブジェクト

<br>

- `式展開`とは、`#{計算式}`と書くことで、文字列に計算結果を埋め込むことができる書き方
  - `puts "1+2の答えは#{1+2}です"`
- 式展開には変数も使うことができる

```
order = "ice coffee"
puts "ご注文は#{order}ですね？"
```
<br>

- rubyの習慣
  - `スネークケース`とは、`my_order`のように英字は全て小文字で書き、２単語以上つなげる時は、`_`で繋ぐ記法

<br>

- `getsメソッド`
  - ターミナル上から値を入力し、変数へ入れるメソッド

- `chompメソッド`とは、末尾の改行を取り除くためのメソッド
  - `"2¥n".chomp`の結果は`2`になる

- `¥n`とは、`Enter`を押した際の`改行`の意味

```
# もし２を入力したら、"2¥n"という文字列が x に代入される
x = gets
# もし3を入力したら、"3¥n"という文字列が y に代入される
y = gets
puts x.to_i + y.to_i
# 代入した文字列を整数として扱うには`.to_i`で整数オブジェクトに変換する
```

<br>

- `定数`とは、２回目以降の代入を警告`warning`する箱。代入は一応行われる。
- 定数の作り方
  - `先頭の文字を大文字にする`
  - `Haryu = "it's me"` ← 定数
  - `haryu = "it's me"` ← 変数

<br>

- コメント(#)は行の途中からも利用できる
  - `puts 1 + 3 # + 5`の結果は４
- 数行に渡ってコメントする方法
  - `=begin と =end`で囲む
  - 行の先頭から書く必要があるので注意

```
pust 1
=begin
puts 2
puts "hello"
=end

#結果は　１　のみ
```

<br>

- `irb`とは、入力したプログラムを一行ずつその場で実行させる手段。プログラムと対話的に話すことができる
- `irb`は`ruby`言語を話す
- `terminal`では`shell`言語を話す
  - つまり、irb外ではrubyの言語を使うことはできなくなる

- プログラムの途中で`irb`を使う方法
  - 止めたい直後に`binding.irb`を記述する

```bin.rb
a = 1
binding.irb
puts a
```

とすることで、変数aの中身を確認できたり、違う値をaに代入できたりが可能

<br>

1. ファイル内で指定した変数の値をirb上で変更する
2. exitでirbから抜ける
3. 1で再代入した値が反映される(その時限定)

<br>

- `pメソッド`とは、変数の中身を表示させるメソッド。主にデバッグツールとして利用する。

<br>

- エラーメッセージについて
  - `undefined method <文字列> for main:Object`とは、<文字列>というメソッドが定義されていないことを意味している
  - `(NoMethodError)`などの`()`で囲まれた文字列は、エラーのメッセージの題名のようなもの
    - `(NoMethodError)`とは、メソッドが定義されていな
    - `(NameError)`とは、変数orメソッドが定義されていない
    - `(ZeroDivisonError)`とは、0徐算エラーを意味（0で割り算をするな！）
    - `(LoadError)`とは、実行したファイルやディレクトリが存在しないことを意味

<br>

- 比較メソッドは、条件を満たせば`true`、満たさなければ`false`を返す。`true`と`false`はオブジェクト
  - `>`
  - `>=`
  - `<`
  - `<=`

- 等しいかどうかを判断するメソッド
  - `==` 等しければ true
  - `!=` 等しくなければ　true

- 末尾の`?`がつくメソッド
  - ですか？の問いにYesであればtrue、Noであればfalseを返す

- `even?メソッド`
  - 偶数かどうかを判断する

- `odd?メソッド`
  - 奇数かどうかを判断する

<br>

- 後置if(if修飾子)を使うことで、よりスマートにif文を書くことができる

```
wallet = 500
if wallet >= 300
  puts "buying a ice before backing home"
end

#    ↓　↓
# 後置if(if修飾子)

wallet = 500
puts "buying a ice before backing home" if wallet >= 300

# 上と下の結果は同じ
```

<br>

- `!=`と`unless` ~等しくないの表現方法~
  - `if foo != baz`
  - `unless foo == baz`

<br>

- `!` trueとfalseを反転させる。`!`は、変数やオブジェクトの前に書く

```
x = false
unless x
  puts "unless: x is false"
end

if !x
  puts "if: x is fasle"
end

irb>
unless: x is false
if: x is false
```

[解説]

unlessの条件に書かれた変数xは、falseが代入されているので条件が満たされない。`unless`は条件が満たされない時に処理を実行するので、`puts "unless: x is false"`が実行される。

また、ifの条件に書かれた`!x`の結果はtrueになり、条件を満たすため、`puts "if: x is fasle"`が実行されるというわけ

ifの条件を満たすルールは、「条件がfalseまたは(`||`)nil は、条件を満たさず、それ以外は条件を満たす」

<br>

- `||`
  - または（or）
  - 3つ以上の条件を繋げることも可能

- `&&`
  - かつ（and）
  - 3つ以上の条件を繋げることも可能

<br>

- `case`とは、条件によって複数の道から１つを選んで分岐させる分岐記法。ifは二者択一であるのに対して、caseは、選択肢が２つ、３つ、それ以上と、より多くの候補の中から１つを選び、分岐する
  - もし複数の候補と合致した場合は、最初に合致したwhen節のみを処理する。（コードは上から下へ）
  - もしどれとも合致しなければ、何も実行しないため、`else`でどれとも合致しない場合の記述ができる

```
order = "coffee"
case order
when "coffee"
  puts "¥300"
when "moca"
  puts "¥440"
end
```

<br>

[コツ]

- ifは、２択の時に使用
- caseは、３択以上の時に使用
- ifを書いていて、同じ変数で何回も判定させている場合は、caseで書いてみよう

<br>

- caseの後に変数を書かない記法

```
wallet = 300
case
when wallet >= 500
  puts "bin"
when wallet >= 300
  puts "giri"
end

# 結果　giri
```

<br>

- `n.timesメソッド`とは、繰り返しの処理を実現するメソッド
  - ブロックでは`do`を書くことに注意

- `{}`とは、do end の代わりの記法

```
3.times {
  puts "time not do end"
}
```

- rubyの習慣的に、ブロックを複数行で書くときは、`do end`を使い、一行で書くときは、`{}`を使う

<br>

- 条件付き繰り返し`while`とは、条件を満たしている間ずっと繰り返す時に使う

```
biscuit = 0
while biscuit < 9
  biscuit += 2
  puts "ポケットを叩くとビスケットが#{biscuit}つ"
end
```

<br>




